{% extends 'auction/base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
        <section class="page-section portfolio" id="portfolio" style="margin-top: 100px">
            <!-- Portfolio Section Heading-->
            <div class="container">
                <!-- Portfolio Section Heading-->
                <div class="text-center">
                    <h2 class="page-section-heading text-secondary mb-0 d-inline-block" id="test">경매 목록 </h2>
                </div>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Portfolio Grid Items-->
                <div class="row justify-content-center">
                    <!-- Portfolio Items-->
                    {% for i in product %}
                        <div class="col-md-6 col-lg-4 mb-5">
                            <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal"  data-name="{{ i.name }}" data-content="{{ i.content }}">
                                <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                    <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-search-dollar fa-2x"></i></i></div>
                                </div>
                                {% if i.photo %}
                                <img class="img-fluid" src=../media/{{i.photo}} alt=""/>
                                    <span class="float-left blockquote">12121{{ i.photo }}</span><br>

                                {% else %}
                                <img class="img-fluid" src="{% static 'assets/img/portfolio/cabin.png' %}" alt="Log Cabin"/>
                                {% endif %}
                                <div class="font-weight-bold">
                                    <span class="float-left blockquote">{{ i.name }}</span><br>
                                    <span class="float-right ">시작 가격:{{ i.min_price | intcomma }}￦</span>
                                </div>
                            </div>
                        </div>

                        <!-- Portfolio Modal -->
                        <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog modal-xl" role="document">
                                <div class="modal-content">
                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fas fa-times"></i></span></button>
                                    <div class="modal-body text-center">
                                        <div class="container">
                                            <div class="row justify-content-center">
                                                <div class="col-lg-8">
                                                    <!-- Portfolio Modal - Title-->
                                                    <h2 class="product-name text-secondary mb-0"></h2>
                                                    <!-- Icon Divider-->
                                                    <div class="divider-custom">
                                                        <div class="divider-custom-line"></div>
                                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                                        <div class="divider-custom-line"></div>
                                                    </div>
                                                    <!-- Portfolio Modal - Image-->
                                                    <img class="img-fluid rounded mb-5" src="{% static 'assets/img/portfolio/cabin.png' %}" alt="Log Cabin"/>
                                                    <!-- Portfolio Modal - Text-->

                                                    <!--상품설명위치-->

                                                    <button class="btn btn-primary" data-toggle="modal" data-toggle="modal" data-target="#bid"><i class="fas fa-check"></i>입찰하기</button>
                                                    <button class="btn btn-primary" href="#" data-dismiss="modal"><i class="fas fa-times fa-fw"></i>닫기</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="portfolio-modal modal fade" id="bid" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog modal-xl" role="document">
                                <div class="modal-content">
                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fas fa-times"></i></span></button>
                                    <div class="modal-body text-center">
                                        <div class="container">
                                            <div class="row justify-content-center">
                                                <div class="col-lg-8">
                                                    <!-- Portfolio Modal - Title-->
                                                    <h2 class="product-name text-secondary mb-0"></h2>
                                                    <!-- Icon Divider-->
                                                    <div class="divider-custom">
                                                        <div class="divider-custom-line"></div>
                                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                                        <div class="divider-custom-line"></div>
                                                    </div>
                                                    <!-- Portfolio Modal - Image-->
                                                        <form name="bid_info">
                                                            <div class="form-group">
                                                                <div>
                                                                <text class="page-section-heading text-secondary mb-0 d-inline-block" >최소 입찰가 :</text>
                                                                <text class="page-section-heading text-secondary mb-0 d-inline-block" id="min_price">{{i.min_price}}</text><br>
                                                                </div>
                                                                <div>
                                                                <text class="page-section-heading text-secondary mb-0 d-inline-block" >현재 최고가 :</text>
                                                                <text class="page-section-heading text-secondary mb-0 d-inline-block" id="max_price">{{i.max_price}}</text><br>
                                                                </div>
                                                                <label for="bid_price" class="col-form-label">입찰할 가격:</label>
                                                                <input type="text" name="bid_price" class="form-control" id="bid_price" name="bid_submit">
                                                            </div>
                                                        </form>
                                                    <!-- Portfolio Modal - Text-->
                                                    <button class="btn btn-primary" href="#" data-dismiss="modal" id="bid_click" ><i class="fas fa-check" ></i>입찰 확정</button>
                                                    <button class="btn btn-primary" href="#" data-dismiss="modal"><i class="fas fa-times fa-fw"></i>입찰 취소</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>

    $(function() {
        $('#portfolioModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)

            var name = button.data('name')
            $(".product-name").html(name)

            var content = button.data('content')
            $(".product-detail").html(content)
        })


    $(document).ready(function(){
        $('#bid_click').click(function(){
            var bid_price = Number(document.getElementById('bid_price').value);
            var min_price=Number($('#min_price').text());
            var max_price=Number($('#max_price').text());
            console.log(bid_price,max_price,min_price);

            console.log(typeof(bid_price));
            console.log(typeof(min_price));
            console.log(typeof(max_price));
            console.log(bid_price,max_price,min_price);

            if(min_price>bid_price)
            {
                alert('최소입찰가보다 적습니다.');
            }
            else
            {

                if(bid_price>max_price)
                {
                    alert('최고가 입찰하였습니다.');
                }
                else
                {
                    alert('최소입찰가보다는 높지만, 더높은 입찰자들이 존재합니다.');
                }

            }
            console.log(value);


        });
    })




})







</script>
{% endblock %}
